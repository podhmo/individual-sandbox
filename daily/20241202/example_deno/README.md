# bskyの投稿用のcliを作ってみる

今回はファイルを分けることなくずっとmain.tsを更新していくことにする。

## 00 とりあえずChatGPTに最初のコードを作らせる

> blueskyに投稿するTypeScriptのコードがほしいです。標準ライブラリだけでやりたいです。

とかでテキトーに生成する。usernameにあたるのはアカウント名ではなく登録したメールアドレスだった。
401になる理由がわからなくて`withTrace()`を追加した。

:warning: passwordなどがそのままヘルプメッセージに表示されるのは怖いかも？

## 01 .envとかを見る感じにした

環境変数や.envを見るようにした。

## 02 標準入力とかを見るようにした

`Deno.stdin.readable` はbyteを返すのでTextDecoderが必要になるのだけれど、これをループしたときにどのようなサイズで読み込まれるのかよくわからない。

```console
$ cat post.md | deno run -A main.ts --debug
```

それっぽく動いた。ところで毎回認証する必要があるんだろうか？

## 03 