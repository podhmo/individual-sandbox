# プロンプト階層管理アプリ (Preact/Deno版)

階層構造でプロンプトテンプレートを管理し、LLMへの入力を効率化するシンプルなWebアプリケーションです。
このバージョンは Preact と htm を使用し、Deno ランタイム上で動作します。ビルドツールは使用しません。

## 機能概要

-   ルートディレクトリの `templates.md` に定義されたプロンプトテンプレートを「カテゴリ → テンプレートタイトル」の階層で表示
-   テンプレートを選択し、必要な変数に文字列を入力
-   最終的なプロンプトを生成し、クリップボードにコピー

## 技術スタック

-   HTML
-   CSS (Pico.css + カスタムスタイル)
-   JavaScript (ES Modules, Preact, htm)
-   Deno (ランタイム)

## セットアップと実行

### 1. 前提条件

-   [Deno](https://deno.land/) (バージョン 1.28 以降推奨)

### 2. プロジェクトの準備

プロジェクトのルートディレクトリに `deno.json` (または `deno.jsonc`) ファイルを以下の内容で作成または編集します。
このファイルで、Preactやhtmなどの依存関係を import map として定義します。

```jsonc
// deno.json
{
  "tasks": {
    "serve": "deno run --allow-read --allow-net https://deno.land/std@0.224.0/http/file_server.ts . -p 8000"
  },
  "imports": {
    "preact": "npm:preact@10.22.1",
    "preact/hooks": "npm:preact@10.22.1/hooks",
    "htm/preact": "npm:htm@3.1.1/preact"
  },
  "lint": {
    "files": {
      "include": ["js/", "*.js", "*.json", "*.md", "*.html", "*.css"],
      "exclude": []
    },
    "rules": { "tags": ["recommended"] }
  },
  "fmt": {
    "files": {
      "include": ["js/", "*.js", "*.json", "*.md", "*.html", "*.css"],
      "exclude": []
    },
    "options": {
      "useTabs": false,
      "lineWidth": 80,
      "indentWidth": 2,
      "singleQuote": true
    }
  }
}
```
**注意:** 上記の `deno.json` の `std` モジュールや `npm:` プレフィックスのバージョン番号は、本回答作成時点のものです。適宜最新のバージョンに更新してください。

### 3. アプリケーションの実行

1.  **ローカルサーバーの起動:**
    プロジェクトのルートディレクトリで以下のコマンドを実行して、Denoの標準HTTPサーバーを起動します。
    ```bash
    deno task serve
    ```
    または、直接コマンドを実行しても構いません（ポート番号はお好みで変更可）。
    ```bash
    deno run --allow-read --allow-net https://deno.land/std@0.224.0/http/file_server.ts . -p 8000
    ```
    サーバーが起動したら、ブラウザで `http://localhost:8000` (または指定したポート) にアクセスしてください。

2.  **ブラウザで直接 `index.html` を開く (非推奨):**
    `index.html` ファイルを直接ブラウザで開くことでも動作する可能性がありますが、`fetch` API の挙動（特にローカルファイルシステムからの読み込み）に制約があるため、HTTPサーバー経由でのアクセスを推奨します。

### 4. テンプレートデータの編集

アプリケーションで利用するプロンプトテンプレートは、ルートディレクトリの `templates.md` ファイルにMarkdown形式で定義されています。
新しいテンプレートの追加、既存テンプレートの編集・削除は、このファイルを直接編集してください。

**Markdown形式のルール:**

-   カテゴリ名は `#` で始まる行で定義します (例: `# ビジネスメール`)。
-   テンプレート名は `##` で始まる行で定義します (例: `## 社外向け挨拶メール`)。
-   テンプレート名の下に記述されたテキストは、最初のコードブロックが現れるまで、そのテンプレートの説明文として扱われます。
-   テンプレート本体は、最初に現れる3つ以上のバッククォート（\`\`\`）またはチルダ（~~~）で囲まれたコードブロック内に記述します。
    -   例:
        ```markdown
        ## テンプレート名
        これが説明文です。
        複数行にわたっても構いません。
        ```
        {{変数1}} を使ったテンプレートです。
        {{変数2}} もあります。
        ```
        ```
編集後、ブラウザをリロードすると変更が反映されます。