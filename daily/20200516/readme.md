## egoist, templateを生成したりするようにしたい

いい感じにやりたいことをメモしていかないとダメ。

- ファイルを対象にする
- ディレクトリを対象にする
- 依存関係を追跡できる
- printで雑に出力できる
- 他のprocessに出力を任せる
- templateを利用して生成できる(jinja2)

### 追記

何が分かっていなかったんだろう？今まではこういう感じ。

```python
@define_struct_set
def models__models():
    from xxx import runtime
    with runtime.generate(structkit) as m:
        m.stmt("xxx")
```

今までのものと微妙に違っていることが有るような気がする？

- 入力となるファイルを持たない
- 出力対象のファイル名が固定(e.g. model.goとか)

今回はこういう感じ。

- 入力となるファイルを持つ（場合がある）
- 出力対象のファイル名が変わる

気づかなかったけど、最初から入力となるファイルを持つことばかりに意識を持っていかれてしまっていた気がした。最初はprintだけで良いような気がする。

そして既存の機能を考えるとcontext managerでファイルIOにアクセスできるのが正しいのかもしれない。
まずはprintだけをしてみるのが正しい？

### 追記

今までの流れだと、関数名からファイルが出力されていた。これを良い感じに扱う方法を見ると良い。
というわけでrenameの関数があると良い。これはデコレーターで提供するべきかもしれない。

後は、なんだろう？出力対象がディレクトリだと良いのかもしれない。
(ただ個人的にはtemplate部分を書くときには生成名と出力対象が一致してほしかったりする？考えてみるとこれもtemplateが同じになることはたまたまなような気もするよなー)

### 追記

いい感じになってきた。次やること

- dirkitのdependency tracking
- mypyで通るようにする

## egoist 懸念

- directiveの設定が無駄なような気がする？
- walkの時の名前が微妙な気がする？
